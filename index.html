<!-- //====================== WEB VIEW SIDE  ===========================
///////================================================================= -->

<html>
	<head>
		
		<link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
		<link href='http://fonts.googleapis.com/css?family=Oswald:400,300' rel='stylesheet' type='text/css'>
		<link href="style.css" type="text/css" rel="stylesheet" />

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		<script type="text/javascript" src="/socket.io/socket.io.js"></script>
		<script type="text/javascript">

			var socket = io.connect('/');

			socket.on('connect', function() {
				console.log("Connected to the server!");

				socket.emit('fileRequest');
			});

			//on connect, recieve all image file names from the server
            socket.on('files', function(data) {
            	var fileArray = data;

            	//TODO: deal with .ds file - how to ignore this??

            	for (var i=0; i<fileArray.length; i++) {
            		// console.log(fileArray[i]);	//will list all images in the image folder 

            		$( "#container" ).prepend(
	                	'<div class="image-holder">'+
	                		'<img src="images/'+fileArray[i]+'" >'+
	                	'</div>'
                	);
            	}
            });

			//for receiving new snaps 
			socket.on('image', function (data) {
                console.log("RECEIVED AN IMAGE FROM THE CAMERA!");
                img = data;

                //TODO: resize the gif here!!!!!!!!
                img.width = 400;
            	img.height = 300;

                $( "#container" ).prepend(
                	'<div class="image-holder">'+
                		'<img src="'+img+'" >'+
                	'</div>'
                );
            });

			//someone pressed the button!
            socket.on('captureStarted', function() {
            	console.log("CAPTURE STARTED!");
            });



			function formatWindow() {
				var w = window.innerWidth;
            	console.log("window width is: " + w);

            	// var imgPad = 1;
            	// document.getElementBy

            	if (w > 1620) {					// 4 COLUMN LAYOUT
            		document.getElementById("container").style.width = 1616;
            	}
	            if (w < 1620 && w > 1220) { 	// 3 COLUMN LAYOUT
	            	document.getElementById("container").style.width = 1212;
	            }
				if (w < 1220 && w > 820) { 		// 2 COLUMN LAYOUT
	            	document.getElementById("container").style.width = 808;
	            }

	            //TODO: also set this for when it's a mobile device!!
	            if (w < 820) {					// SINGLE COLUMN LAYOUT 
	            	document.getElementById("container").style.width = 404;
	            }
			}

			// using event listeners for formatting
			window.addEventListener('resize', formatWindow);
			window.addEventListener('DOMContentLoaded', formatWindow);


		</script>
	</head>

	<body>
		<div id="top-stripe"> </div>

		<div id="header">
			<h1> Mirror Snaps </h1>
		</div>


		<div id ="content-container">

			<div id="container">
			</div>

		</div>

	</body>


</html>



